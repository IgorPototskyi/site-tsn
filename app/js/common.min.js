$(function(){function a(a,e){var s,d,i=$("<ul>").addClass("slider__nav");a.forEach(function(a,t){if(s=$("<div>").addClass("slider__slide"),d=$("<a>").addClass("slider__link").attr({href:a.link}).appendTo(s),a.videoSrc){var o=$("<video>").addClass("slider__video").attr({autoplay:!0,loop:!0,muted:!0}).appendTo(d);$("<source>").attr({src:a.videoSrc,type:a.videoType}).appendTo(o)}else d.css({"background-image":"url('"+a.imageUrl+"')"});$("<h3>").addClass("slider__title").html(a.title).appendTo(d);var n=$("<div>").addClass("slider__date").appendTo(d),l=$("<span>").addClass("slider__section").html(a.section).appendTo(n);"ТСН День"===a.section&&l.addClass("slider__section--imp"),$("<span>").addClass("slider__datetime").html(a.datetime).appendTo(n),s.appendTo(e),$("<li>").addClass("slider__nav-item").attr({"data-link":t}).appendTo(i)},this),i.appendTo(e)}function e(a){$slides=a.children(".slider__slide");var e=$(".slider__nav-item");$slides.hide(),$slides.eq(t).show(),e.eq(t).addClass("active")}function s(a,e){var s,d,i,t,o;a.forEach(function(a){switch(s=$("<div>").addClass("news__item"),i=$("<a>").addClass("news__item-link").attr("href",a.link),d=$("<div>").addClass("news__item-cont"),o=$("<a>").addClass("news__item-section").attr("href",a.sectionLink).html(a.section),$("<img>").addClass("news__item-img").attr({src:a.imageUrl,alt:a.alt}).appendTo(d),a.videoSrc&&(d.addClass("news__item-cont--video"),$("<div>").addClass("news__item-shade").appendTo(d),$("<i>").addClass("fa fa-play-circle-o news__icon-play").appendTo(d),$("<i>").addClass("fa fa-share-square-o news__icon-share").appendTo(d)),d.appendTo(i),$("<h4>").addClass("news__item-title").text(a.title).appendTo(i),i.appendTo(s),t=$("<div>").addClass("news__item-descr"),$("<span>").addClass("news__item-views").html('<i class="fa fa-eye"></i>'+a.views).appendTo(t),$("<span>").addClass("news__item-comments").html('<i class="fa fa-comment-o"></i>'+a.comments).appendTo(t),a.section){case"Світ":o.addClass("section-world");break;case"Україна":o.addClass("section-ukr");break;case"Гламур":o.addClass("section-glam");break;case"Гроші":o.addClass("section-money")}$("<span>").addClass("news__item-datetime").html(a.datetime).appendTo(t),t.appendTo(s),s.appendTo(e)},this);var n=$("<div>").addClass("news__video").appendTo(e);$("<i>").addClass("fa fa-play news__video-play").appendTo(n),$("<i>").addClass("fa fa-times news__video-close").appendTo(n)}function d(a,e){$("<div>").addClass("photos__item-sizer").appendTo(e),$("<div>").addClass("photos__gutter-sizer").appendTo(e);var s;a.forEach(function(a,d){if(s=$("<div>").addClass("photos__item").css({"background-image":"url("+a.photosUrl[0]+")","background-position":a.photoPosition}),"true"===a.doubleWidth&&s.addClass("photos__item--width2"),"true"===a.doubleHeight&&s.addClass("photos__item--height2"),"true"===a.doubleHeight||"true"===a.doubleWidth){var i=a.description,t=$("<div>").addClass("photos__descr"),o=$("<div>").addClass("photos__title");i.length>50&&(i=i.slice(0,51)+"..."),o.html(i).appendTo(t),t.appendTo(s)}$("<i>").addClass("fa fa-share-square-o photos__open").appendTo(s),s.attr("data-pos",d).appendTo(e)},this)}function i(a,e){$("<h2>").addClass("aside__title").html("Останні новини").appendTo(e);var s,d;a.forEach(function(a,i){if("true"===a.banner){var t=$("<div>").addClass("aside__banner"),o=$("<a>").addClass("aside__banner-link").attr({href:a.link});$("<img>").attr({src:a.imageUrl,alt:a.alt}).appendTo(o),o.appendTo(t),t.appendTo(e)}else{if(s=$("<div>").addClass("aside__item"),d=$("<a>").addClass("aside__link").attr("href",a.link),"true"===a.isImportant&&d.addClass("aside__link--imp"),a.imageUrl){var n=$("<div>").addClass("aside__img-cont");if($("<img>").addClass("aside__img").attr({src:a.imageUrl,alt:a.alt}).appendTo(n),a.videoTime){var l=$("<div>").addClass("aside__video").html('<i class="fa fa-play-circle-o"></i>Видео').appendTo(n);$("<span>").addClass("aside__video-time").html(a.videoTime).appendTo(l)}n.appendTo(d)}$("<span>").html(a.title).appendTo(d),d.appendTo(s),$("<div>").addClass("aside__datetime").html(a.datetime).appendTo(s),s.appendTo(e)}},this);var i=$("<div>").addClass("aside__load").appendTo(e);$("<a>").addClass("aside__load-link").attr("href","#").html("Завантажити ще").appendTo(i),$("<i>").addClass("fa fa-download").appendTo(i)}!function(){TweenMax.to(".preloader__tsn",1,{backgroundColor:"#cc0000"})}();var t=0;!function(){var s=$("<div>").addClass("slider").appendTo(".header");$.getJSON("json/slider.json",function(d){var i=d.slice();i.length&&(a(i,s),e(s))})}(),$("body").on("mouseenter",".slider__nav-item",function(a){var e=$(this).attr("data-link");if(e!=t){$(".slider__nav-item").eq(t).removeClass("active"),$(this).addClass("active"),$slides=$(".slider__slide"),$slides.eq(t).animate({height:"hide"}),$slides.eq(e).animate({height:"show"});var s=$slides.eq(e).find(".slider__video");s.length>0&&(s.get(0).currentTime=0),t=e}});var o=$(".top-nav"),n=$(".main-nav__list"),l=$(".social__link");$(window).scroll(function(){var a=$(document).scrollTop();0==a&&o.removeClass("top-nav--dark"),a>1&&a<400&&(o.removeClass("top-nav--light"),l.removeClass("social__link--dark"),o.addClass("top-nav--dark"),n.removeClass("main-nav__list--fixed")),a>400&&(l.addClass("social__link--dark"),o.removeClass("top-nav--dark"),o.addClass("top-nav--light"),n.addClass("main-nav__list--fixed"))});var r=$(".top-nav__search"),_=$(".social");r.on("click",function(){_.hide(300),$(this).toggleClass("top-nav__search--big")}),$(".top-nav__share-btn").on("click",function(){r.removeClass("top-nav__search--big"),_.toggle(300)});var p=$(".news__nav-link");p.on("click",function(){p.removeClass("active"),$(this).addClass("active")}),function(){var a=$("<div>",{class:"news__container"}).appendTo(".news");$.getJSON("json/news.json",function(e){var d=e.slice();d.length&&s(d,a)})}(),$(".news__video").css("left",o.position().left+20),$("body").on("click",".news__icon-share",function(a){a.preventDefault();var e=$(".news__video"),s=$(".news__item-cont");return $(this).parent().hasClass("news__item-cont--shared")?(e.removeClass("active"),s.removeClass("news__item-cont--shared")):(e.removeClass("active"),s.removeClass("news__item-cont--shared"),$(this).parent().addClass("news__item-cont--shared"),e.children(".news__item-img").remove(),$(this).siblings(".news__item-img").clone().prependTo(e),e.addClass("active")),!1}),$("body").on("click",".news__video-close",function(a){$(".news__video").removeClass("active"),$(".news__item-cont").removeClass("news__item-cont--shared")});var c=[];!function(){var a=$("<div>",{class:"photos__cont"}).appendTo(".photos");$.getJSON("json/photos.json",function(e){c=e.slice(),c.length&&(d(c,a),a.masonry({itemSelector:".photos__item",gutter:".photos__gutter-sizer",columnWidth:".photos__item-sizer",percentPosition:!0}))})}(),$("body").on("click",".photos__open",function(){var a=$(this).parent().attr("data-pos"),e=c[a],s=$("body").scrollTop(),d=$("<div>").addClass("gallery").css("padding-top",s).appendTo(".photos");$("<h2>").addClass("gallery__title").html(e.description).appendTo(d);var i=$("<div>").addClass("fotorama gallery__cont").attr({"data-width":"616","data-height":"412","data-nav":"thumbs","data-thumbwidth":"90","data-thumbheight":"60","data-thumbborderwidth":"1","data-thumbbordercolor":"#fff","data-transition":"crossfade","data-auto":"false"}).appendTo(d);e.photosUrl.forEach(function(a){var e=$("<a>").addClass("gallery__link").attr("href",a).appendTo(i);$("<img>").addClass("gallery__img").attr("src",a).appendTo(e)},this),$("<i>").addClass("fa fa-times gallery__close").css("top",s+20).appendTo(d);$(".fotorama").fotorama()}),$("body").on("click",".gallery__close",function(){$(".gallery").remove()}),function(){var a=$("<div>",{class:"aside__content"}).appendTo(".aside");$.getJSON("json/aside.json",function(e){var s=e.slice();s.length&&i(s,a)})}()}),$(window).on("load",function(){TweenMax.to($(".preloader__title"),1,{opacity:1}),TweenMax.to($(".preloader"),1,{display:"none",delay:1})});