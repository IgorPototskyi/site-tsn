$(function(){function e(e,s){$("<div>").addClass("photos__item-sizer").appendTo(s),$("<div>").addClass("photos__gutter-sizer").appendTo(s);var o;e.forEach(function(e){if(o=$("<div>").addClass("photos__item").css({"background-image":"url("+e.photosUrl[0]+")","background-position":e.photoPosition}),"true"===e.doubleWidth&&o.addClass("photos__item--width2"),"true"===e.doubleHeight&&o.addClass("photos__item--height2"),"true"===e.doubleHeight||"true"===e.doubleWidth){var t=e.description,a=$("<div>").addClass("photos__descr"),i=$("<div>").addClass("photos__title");t.length>50&&(t=t.slice(0,51)+"..."),i.html(t).appendTo(a),a.appendTo(o)}$("<i>").addClass("fa fa-share-square-o photos__open").appendTo(o),o.appendTo(s)},this)}var s=$(".slider__slide"),o=$(".slider__nav-item"),t=0;s.hide(),s.eq(0).show(),o.eq(t).addClass("active"),o.on("mouseenter",function(){var e=$(this).attr("data-link");if(e!=t){o.eq(t).removeClass("active"),$(this).addClass("active"),s.eq(t).animate({height:"hide"}),s.eq(e).animate({height:"show"});var a=s.eq(e).find(".slider__video");a.length>0&&(a.get(0).currentTime=0),t=e}});var a=$(".top-nav"),i=$(".main-nav__list"),n=$(".social__link");$(window).scroll(function(){var e=$(document).scrollTop();0==e&&a.removeClass("top-nav--dark"),e>1&&e<400&&(a.removeClass("top-nav--light"),n.removeClass("social__link--dark"),a.addClass("top-nav--dark"),i.removeClass("main-nav__list--fixed")),e>400&&(n.addClass("social__link--dark"),a.removeClass("top-nav--dark"),a.addClass("top-nav--light"),i.addClass("main-nav__list--fixed"))});var d=$(".top-nav__search"),l=$(".social");d.on("click",function(){l.hide(300),$(this).toggleClass("top-nav__search--big")}),$(".top-nav__share-btn").on("click",function(){d.removeClass("top-nav__search--big"),l.toggle(300)});var _=$(".news__nav-link");_.on("click",function(){_.removeClass("active"),$(this).addClass("active")}),$(".news__item-shade").clone().appendTo(".news__item-cont--video"),$(".news__icon-play").clone().appendTo(".news__item-cont--video"),$(".news__icon-share").clone().appendTo(".news__item-cont--video");var r=$(".news__video"),c=$(".news__item-cont");r.css("left",a.position().left+20),$(".news__icon-share").on("click",function(e){return e.preventDefault(),$(this).parent().hasClass("news__item-cont--shared")?(r.removeClass("active"),c.removeClass("news__item-cont--shared")):(r.removeClass("active"),c.removeClass("news__item-cont--shared"),$(this).parent().addClass("news__item-cont--shared"),r.children(".news__item-img").remove(),$(this).siblings(".news__item-img").clone().prependTo(r),r.addClass("active")),!1}),$(".news__video-close").on("click",function(e){r.removeClass("active"),c.removeClass("news__item-cont--shared")});var h=[];!function(){var s=$("<div>",{class:"photos__cont"}).appendTo(".photos");$.getJSON("../json/photos.json",function(o){h=o.slice(),h.length&&(e(h,s),s.masonry({itemSelector:".photos__item",gutter:".photos__gutter-sizer",columnWidth:".photos__item-sizer",percentPosition:!0}))})}(),$("body").on("click",".photos__open",function(){})});