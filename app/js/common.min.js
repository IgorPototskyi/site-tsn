$(function(){function a(a,e){var s,i,d,t,n;a.forEach(function(a){switch(s=$("<div>").addClass("news__item"),d=$("<a>").addClass("news__item-link").attr("href",a.link),i=$("<div>").addClass("news__item-cont"),n=$("<a>").addClass("news__item-section").attr("href",a.sectionLink).html(a.section),$("<img>").addClass("news__item-img").attr({src:a.imageUrl,alt:a.alt}).appendTo(i),a.videoSrc&&(i.addClass("news__item-cont--video"),$("<div>").addClass("news__item-shade").appendTo(i),$("<i>").addClass("fa fa-play-circle-o news__icon-play").appendTo(i),$("<i>").addClass("fa fa-share-square-o news__icon-share").appendTo(i)),i.appendTo(d),$("<h4>").addClass("news__item-title").text(a.title).appendTo(d),d.appendTo(s),t=$("<div>").addClass("news__item-descr"),$("<span>").addClass("news__item-views").html('<i class="fa fa-eye"></i>'+a.views).appendTo(t),$("<span>").addClass("news__item-comments").html('<i class="fa fa-comment-o"></i>'+a.comments).appendTo(t),a.section){case"Світ":n.addClass("section-world");break;case"Україна":n.addClass("section-ukr");break;case"Гламур":n.addClass("section-glam");break;case"Гроші":n.addClass("section-money")}$("<span>").addClass("news__item-datetime").html(a.datetime).appendTo(t),t.appendTo(s),s.appendTo(e)},this);var o=$("<div>").addClass("news__video").appendTo(e);$("<i>").addClass("fa fa-play news__video-play").appendTo(o),$("<i>").addClass("fa fa-times news__video-close").appendTo(o)}function e(a,e){$("<div>").addClass("photos__item-sizer").appendTo(e),$("<div>").addClass("photos__gutter-sizer").appendTo(e);var s;a.forEach(function(a){if(s=$("<div>").addClass("photos__item").css({"background-image":"url("+a.photosUrl[0]+")","background-position":a.photoPosition}),"true"===a.doubleWidth&&s.addClass("photos__item--width2"),"true"===a.doubleHeight&&s.addClass("photos__item--height2"),"true"===a.doubleHeight||"true"===a.doubleWidth){var i=a.description,d=$("<div>").addClass("photos__descr"),t=$("<div>").addClass("photos__title");i.length>50&&(i=i.slice(0,51)+"..."),t.html(i).appendTo(d),d.appendTo(s)}$("<i>").addClass("fa fa-share-square-o photos__open").appendTo(s),s.appendTo(e)},this)}function s(a,e){$("<h2>").addClass("aside__title").html("Останні новини").appendTo(e);var s,i;a.forEach(function(a,d){if("true"===a.banner){var t=$("<div>").addClass("aside__banner"),n=$("<a>").addClass("aside__banner-link").attr({href:a.link});$("<img>").attr({src:a.imageUrl,alt:a.alt}).appendTo(n),n.appendTo(t),t.appendTo(e)}else{if(s=$("<div>").addClass("aside__item"),i=$("<a>").addClass("aside__link").attr("href",a.link),"true"===a.isImportant&&i.addClass("aside__link--imp"),a.imageUrl){var o=$("<div>").addClass("aside__img-cont");if($("<img>").addClass("aside__img").attr({src:a.imageUrl,alt:a.alt}).appendTo(o),a.videoTime){var l=$("<div>").addClass("aside__video").html('<i class="fa fa-play-circle-o"></i>Видео').appendTo(o);$("<span>").addClass("aside__video-time").html(a.videoTime).appendTo(l)}o.appendTo(i)}$("<span>").html(a.title).appendTo(i),i.appendTo(s),$("<div>").addClass("aside__datetime").html(a.datetime).appendTo(s),s.appendTo(e)}},this);var d=$("<div>").addClass("aside__load").appendTo(e);$("<a>").addClass("aside__load-link").attr("href","#").html("Завантажити ще").appendTo(d),$("<i>").addClass("fa fa-download").appendTo(d)}var i=$(".slider__slide"),d=$(".slider__nav-item"),t=0;i.hide(),i.eq(0).show(),d.eq(t).addClass("active"),d.on("mouseenter",function(){var a=$(this).attr("data-link");if(a!=t){d.eq(t).removeClass("active"),$(this).addClass("active"),i.eq(t).animate({height:"hide"}),i.eq(a).animate({height:"show"});var e=i.eq(a).find(".slider__video");e.length>0&&(e.get(0).currentTime=0),t=a}});var n=$(".top-nav"),o=$(".main-nav__list"),l=$(".social__link");$(window).scroll(function(){var a=$(document).scrollTop();0==a&&n.removeClass("top-nav--dark"),a>1&&a<400&&(n.removeClass("top-nav--light"),l.removeClass("social__link--dark"),n.addClass("top-nav--dark"),o.removeClass("main-nav__list--fixed")),a>400&&(l.addClass("social__link--dark"),n.removeClass("top-nav--dark"),n.addClass("top-nav--light"),o.addClass("main-nav__list--fixed"))});var _=$(".top-nav__search"),r=$(".social");_.on("click",function(){r.hide(300),$(this).toggleClass("top-nav__search--big")}),$(".top-nav__share-btn").on("click",function(){_.removeClass("top-nav__search--big"),r.toggle(300)});var p=$(".news__nav-link");p.on("click",function(){p.removeClass("active"),$(this).addClass("active")}),function(){var e=$("<div>",{class:"news__container"}).appendTo(".news");$.getJSON("../json/news.json",function(s){var i=s.slice();i.length&&a(i,e)})}(),$(".news__video").css("left",n.position().left+20),$("body").on("click",".news__icon-share",function(a){a.preventDefault();var e=$(".news__video"),s=$(".news__item-cont");return $(this).parent().hasClass("news__item-cont--shared")?(e.removeClass("active"),s.removeClass("news__item-cont--shared")):(e.removeClass("active"),s.removeClass("news__item-cont--shared"),$(this).parent().addClass("news__item-cont--shared"),e.children(".news__item-img").remove(),$(this).siblings(".news__item-img").clone().prependTo(e),e.addClass("active")),!1}),$("body").on("click",".news__video-close",function(a){$(".news__video").removeClass("active"),$(".news__item-cont").removeClass("news__item-cont--shared")});var c=[];!function(){var a=$("<div>",{class:"photos__cont"}).appendTo(".photos");$.getJSON("../json/photos.json",function(s){c=s.slice(),c.length&&(e(c,a),a.masonry({itemSelector:".photos__item",gutter:".photos__gutter-sizer",columnWidth:".photos__item-sizer",percentPosition:!0}))})}(),$("body").on("click",".photos__open",function(){}),function(){var a=$("<div>",{class:"aside__content"}).appendTo(".aside");$.getJSON("../json/aside.json",function(e){var i=e.slice();i.length&&s(i,a)})}()});